# Profile para desenvolvimento LOCAL (fora do Docker)
# Para usar: SPRING_PROFILES_ACTIVE=local mvn spring-boot:run
# Ou simplesmente rode sem definir nada, pois 'local' é o padrão
# IMPORTANTE: Configure as credenciais no arquivo .env

spring:
  # PostgreSQL - Conecta no container do Docker (localhost)
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/repositorio_db}
    username: ${SPRING_DATASOURCE_USERNAME:postgres}
    password: ${SPRING_DATASOURCE_PASSWORD:postgres}

  # MongoDB - Conecta no container do Docker (localhost)
  data:
    mongodb:
      uri: ${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/repositorio_db}
    
    # Redis - Conecta no container do Docker (localhost)
    redis:
      host: ${SPRING_DATA_REDIS_HOST:localhost}
      port: ${SPRING_DATA_REDIS_PORT:6379}

# Logging mais verboso para desenvolvimento
logging:
  level:
    root: INFO
    ignis.repositorio: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
  pattern:
    console: "%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n"

server:
  port: 8080

# Swagger habilitado
springdoc:
  swagger-ui:
    enabled: true
    try-it-out-enabled: true

# Hot reload habilitado
spring.devtools:
  restart:
    enabled: true
  livereload:
    enabled: true
